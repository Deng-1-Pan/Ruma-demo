# è¶…è½»é‡çº§æ„å»º - å®Œå…¨é¿å…npmæ„å»ºè¿‡ç¨‹
FROM nginx:alpine

# åˆ›å»ºæ¼”ç¤ºé¡µé¢
RUN echo '<!DOCTYPE html><html><head><title>RuMa Demo</title><meta charset="utf-8"><style>body{font-family:Arial,sans-serif;margin:40px;background:#f5f5f5}.container{max-width:800px;margin:0 auto;background:white;padding:30px;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,0.1)}.header{text-align:center;margin-bottom:30px;color:#1890ff}.demo-section{margin:20px 0;padding:20px;border:1px solid #e8e8e8;border-radius:6px}.emotion-bar{height:20px;background:#1890ff;margin:10px 0;border-radius:10px;position:relative}.emotion-label{position:absolute;left:10px;top:2px;color:white;font-size:12px}</style></head><body><div class="container"><div class="header"><h1>ğŸ¤– RuMa æƒ…æ„Ÿæ”¯æŒèŠå¤©æœºå™¨äºº</h1><p>å‰ç«¯æ¼”ç¤ºç‰ˆ - è¶…è½»é‡çº§éƒ¨ç½²</p></div><div class="demo-section"><h3>ğŸ“Š æƒ…ç»ªåˆ†ææ¼”ç¤º</h3><div>å¿«ä¹<div class="emotion-bar" style="width:80%"><span class="emotion-label">80%</span></div></div><div>ç„¦è™‘<div class="emotion-bar" style="width:30%; background:#ff4d4f"><span class="emotion-label">30%</span></div></div><div>å¹³é™<div class="emotion-bar" style="width:60%; background:#52c41a"><span class="emotion-label">60%</span></div></div></div><div class="demo-section"><h3>ğŸ’¬ èŠå¤©æ¼”ç¤º</h3><div style="background:#f9f9f9;padding:15px;border-radius:4px;margin:10px 0"><strong>ç”¨æˆ·:</strong> æˆ‘ä»Šå¤©æ„Ÿè§‰æœ‰äº›ç„¦è™‘</div><div style="background:#e6f7ff;padding:15px;border-radius:4px;margin:10px 0"><strong>RuMa:</strong> æˆ‘ç†è§£ä½ çš„æ„Ÿå—ã€‚ç„¦è™‘æ˜¯å¾ˆå¸¸è§çš„æƒ…ç»ªï¼Œè®©æˆ‘ä»¬ä¸€èµ·æ¥å¤„ç†å®ƒã€‚ä½ èƒ½å‘Šè¯‰æˆ‘æ˜¯ä»€ä¹ˆè®©ä½ æ„Ÿåˆ°ç„¦è™‘å—ï¼Ÿ</div></div><div class="demo-section"><h3>ğŸ“ˆ åŠŸèƒ½ç‰¹ç‚¹</h3><ul><li>âœ… å®æ—¶æƒ…ç»ªåˆ†æ</li><li>âœ… æ™ºèƒ½æƒ…æ„Ÿæ”¯æŒ</li><li>âœ… å¯è§†åŒ–æƒ…ç»ªæŠ¥å‘Š</li><li>âœ… å¤šå¹³å°æ”¯æŒ</li></ul></div><div style="text-align:center;margin-top:40px;color:#999;font-size:12px">éƒ¨ç½²æˆåŠŸ ğŸ‰ | æ„å»ºæ—¶é—´: < 30ç§’</div></div></body></html>' > /usr/share/nginx/html/index.html

# åˆ›å»ºnginxé…ç½®
RUN echo 'events{worker_connections 1024;}http{include /etc/nginx/mime.types;default_type application/octet-stream;sendfile on;keepalive_timeout 65;server{listen 80;server_name localhost;location /{root /usr/share/nginx/html;index index.html;try_files $uri $uri/ /index.html;}}}' > /etc/nginx/nginx.conf

# æš´éœ²ç«¯å£
EXPOSE 80

# å¥åº·æ£€æŸ¥
HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \
  CMD wget --no-verbose --tries=1 --spider http://localhost:80/ || exit 1

# å¯åŠ¨nginx
CMD ["nginx", "-g", "daemon off;"] 